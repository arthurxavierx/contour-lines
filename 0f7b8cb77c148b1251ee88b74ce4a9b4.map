{"version":3,"sources":["lib/modernizr.js","webgl.js","shader/vert.js","shader/noise4D.js","shader/frag.js","main.js"],"names":["e","n","t","o","s","a","i","l","f","r","hasOwnProperty","name","push","toLowerCase","options","aliases","length","fn","split","Modernizr","Boolean","c","join","className","_config","classPrefix","u","baseVal","enableJSClass","RegExp","replace","enableClasses","createElement","arguments","createElementNS","call","apply","_version","usePrefixes","_q","on","setTimeout","addTest","addAsyncTest","prototype","documentElement","nodeName","getContext","webglextensions","webgl","getSupportedExtensions","p","window","document","createCanvas","createShaderProgram","loadShader","id","canvas","getElementById","context","gl","shaders","attribs","uniforms","program","createProgram","forEach","attachShader","shader","linkProgram","getProgramParameter","LINK_STATUS","Error","getProgramInfoLog","reduce","obj","getAttribLocation","getUniformLocation","vertexShader","VERTEX_SHADER","src","fragmentShader","FRAGMENT_SHADER","type","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","shaderLog","getShaderInfoLog","deleteShader","ε","SPEED","DRAG","OFFSET","LINES0","LINES_MIN","LINES_MAX","$","querySelectorAll","bind","$$","querySelector","addEventListener","main","OES_standard_derivatives","body","resizeCanvas","Γ","initGL","introduction","time0","loop","time","dt","update","render","requestAnimationFrame","onMouseWheel","onMouseMove","width","clientWidth","height","clientHeight","viewport","clearColor","clearDepth","disable","DEPTH_TEST","CULL_FACE","getExtension","terrainShader","random","Math","vertexBuffer","createBuffer","offset","handler","innerHTML","removeEventListener","smoothstep","min","max","x","sig","pointer","dpointer","target","zoom","dzoom","clientX","clientY","preventDefault","delta","wheelDelta","detail","abs","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","drawingBufferWidth","drawingBufferHeight","useProgram","uniform2f","u_Pointer","u_Offset","uniform1f","u_Height","u_Lines","u_AspectRatio","points","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","vertexAttribPointer","a_Position","FLOAT","enableVertexAttribArray","drawArrays","TRIANGLE_FAN"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpCD;;kJADA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;;AACA;;;;;;AAFA;kBAIe","file":"0f7b8cb77c148b1251ee88b74ce4a9b4.map","sourcesContent":["/*! modernizr 3.5.0 (Custom Build) | MIT *\n * https://modernizr.com/download/?-canvas-webgl-webglextensions-setclasses !*/\n!function(e,n,t){function o(e,n){return typeof e===n}function s(){var e,n,t,s,a,i,l;for(var f in r)if(r.hasOwnProperty(f)){if(e=[],n=r[f],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(s=o(n.fn,\"function\")?n.fn():n.fn,a=0;a<e.length;a++)i=e[a],l=i.split(\".\"),1===l.length?Modernizr[l[0]]=s:(!Modernizr[l[0]]||Modernizr[l[0]]instanceof Boolean||(Modernizr[l[0]]=new Boolean(Modernizr[l[0]])),Modernizr[l[0]][l[1]]=s),c.push((s?\"\":\"no-\")+l.join(\"-\"))}}function a(e){var n=f.className,t=Modernizr._config.classPrefix||\"\";if(u&&(n=n.baseVal),Modernizr._config.enableJSClass){var o=new RegExp(\"(^|\\\\s)\"+t+\"no-js(\\\\s|$)\");n=n.replace(o,\"$1\"+t+\"js$2\")}Modernizr._config.enableClasses&&(n+=\" \"+t+e.join(\" \"+t),u?f.className.baseVal=n:f.className=n)}function i(){return\"function\"!=typeof n.createElement?n.createElement(arguments[0]):u?n.createElementNS.call(n,\"http://www.w3.org/2000/svg\",arguments[0]):n.createElement.apply(n,arguments)}var r=[],l={_version:\"3.5.0\",_config:{classPrefix:\"\",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){r.push({name:e,fn:n,options:t})},addAsyncTest:function(e){r.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=l,Modernizr=new Modernizr;var c=[],f=n.documentElement,u=\"svg\"===f.nodeName.toLowerCase();Modernizr.addTest(\"canvas\",function(){var e=i(\"canvas\");return!(!e.getContext||!e.getContext(\"2d\"))}),Modernizr.addTest(\"webgl\",function(){var n=i(\"canvas\"),t=\"probablySupportsContext\"in n?\"probablySupportsContext\":\"supportsContext\";return t in n?n[t](\"webgl\")||n[t](\"experimental-webgl\"):\"WebGLRenderingContext\"in e}),Modernizr.addAsyncTest(function(){if(Modernizr.webglextensions=!1,Modernizr.webgl){var e,n,o;try{e=i(\"canvas\"),n=e.getContext(\"webgl\")||e.getContext(\"experimental-webgl\"),o=n.getSupportedExtensions()}catch(s){return}n!==t&&(Modernizr.webglextensions=new Boolean(!0));for(var a=-1,r=o.length;++a<r;)Modernizr.webglextensions[o[a]]=!0;e=t}}),s(),a(c),delete l.addTest,delete l.addAsyncTest;for(var p=0;p<Modernizr._q.length;p++)Modernizr._q[p]();e.Modernizr=Modernizr}(window,document);","export function createCanvas(id) {\n  const canvas = document.getElementById(id);\n  const context = canvas.getContext('webgl');\n  return { canvas, context };\n}\n\nexport function createShaderProgram(gl, shaders, { attribs, uniforms }) {\n  const program = gl.createProgram();\n  shaders.forEach(shader => gl.attachShader(program, shader(gl)));\n  gl.linkProgram(program);\n\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    throw new Error('Unable to initialize the shader program: ' + gl.getProgramInfoLog(program));\n  }\n\n  return {\n    program,\n    attribs: attribs.reduce((obj, a) => (obj[a] = gl.getAttribLocation(program, a), obj), {}),\n    uniforms: uniforms.reduce((obj, u) => (obj[u] = gl.getUniformLocation(program, u), obj), {}),\n  };\n}\n\nexport const vertexShader = src => gl => loadShader(gl, gl.VERTEX_SHADER, src);\nexport const fragmentShader = src => gl => loadShader(gl, gl.FRAGMENT_SHADER, src);\n\nexport function loadShader(gl, type, src) {\n  const shader = gl.createShader(type);\n  gl.shaderSource(shader, src);\n  gl.compileShader(shader);\n\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    const shaderLog = gl.getShaderInfoLog(shader);\n    gl.deleteShader(shader);\n    throw new Error('An error occurred compiling the shaders: ' + shaderLog);\n  }\n\n  return shader;\n}\n","// vim: filetype=glsl\nimport { vertexShader } from '../webgl';\nexport default vertexShader`\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nattribute vec2 a_Position;\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = (a_Position + 1.0) * 0.5;\n  gl_Position = vec4(a_Position, 0.0, 1.0);\n}\n\n\n`;\n","// vim: filetype=glsl\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n//\n\nexport default `\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r) {\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r) {\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip) {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n}\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v) {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n      0.276393202250021,  // 2 * G4\n      0.414589803375032,  // 3 * G4\n      -0.447213595499958); // -1 + 4 * G4\n\n  // First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n  // Other corners\n\n  // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n  //  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n  //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n  // Permutations\n  i = mod289(i);\n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n            i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n          + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n        + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n      + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n  // Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n  // 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n  // Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n  // Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n      + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n\n`;\n","// vim: filetype=glsl\nimport { fragmentShader } from '../webgl';\nimport noise4D from './noise4D.js';\n\nexport default fragmentShader(`\n\n#extension GL_OES_standard_derivatives : enable\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#define PI 3.14159265359\n\nuniform vec2 u_Pointer;\nuniform vec2 u_Offset;\nuniform float u_Height;\nuniform float u_Lines;\nuniform float u_AspectRatio;\n\nvarying vec2 v_UV;\n\n${noise4D}\n\nvoid main() {\n  vec2 uv = v_UV * vec2(u_AspectRatio, 1.0);\n  vec4 position = vec4(uv + u_Offset, u_Pointer.xy / 5.0);\n\n  float noise =\n    snoise(position)\n    + 0.5 * snoise(position * vec4(2.0, 2.0, 1.4, 1.4))\n    + 0.25 * snoise(position * vec4(4.0, 4.0, 2.0, 2.0));\n  noise *= u_Height;\n\n  float f = abs(fract(noise * u_Lines * u_Height) - 0.5);\n  float df = fwidth(noise * u_Lines * u_Height);\n\n  const float m = 0.1;\n  float z = clamp((f - df*m) / df + m, m, 1.0);\n\n  gl_FragColor = vec4(z, z, z, 1);\n}\n\n`);\n","import './lib/modernizr';\n\nimport { createCanvas, createShaderProgram } from './webgl';\n\nimport SHADER_VERT from './shader/vert';\nimport SHADER_FRAG from './shader/frag';\n\n//\nconst ε = 0.00001, SPEED = 10.0, DRAG = 0.98, OFFSET = 1000.0;\n\nconst LINES0 = 5, LINES_MIN = 1, LINES_MAX = 12;\n\n//\nconst $ = document.querySelectorAll.bind(document);\nconst $$ = document.querySelector.bind(document);\n\nwindow.addEventListener('load', main, false);\n\nfunction main() {\n  if (!Modernizr.canvas ||\n      !Modernizr.webgl ||\n      !Modernizr.webglextensions ||\n      !Modernizr.webglextensions.OES_standard_derivatives)\n    document.body.className += 'incompatible';\n\n  const { canvas, context: gl } = createCanvas('canvas');\n  resizeCanvas(gl);\n\n  // initialize WebGL environment\n  const Γ = initGL(gl, { canvas });\n\n  introduction(Γ);\n\n  //\n  let time0 = 0;\n  function loop(time) {\n    resizeCanvas(gl);\n\n    const dt = (time - time0) * 0.001;\n\n    if (time0 > 0)\n      update(dt, Γ);\n    render(gl, dt, Γ);\n\n    time0 = time;\n    window.requestAnimationFrame(loop);\n  }\n  window.requestAnimationFrame(loop);\n\n  document.body.addEventListener('mousewheel', onMouseWheel.bind(null, Γ), false);\n  document.body.addEventListener('mousemove', onMouseMove.bind(null, Γ), false);\n}\n\nfunction resizeCanvas(gl) {\n  if (gl.canvas.width != gl.canvas.clientWidth || gl.canvas.height != gl.canvas.clientHeight) {\n    gl.canvas.width = gl.canvas.clientWidth;\n    gl.canvas.height = gl.canvas.clientHeight;\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n  }\n}\n\n\nfunction initGL(gl, Γ) {\n  gl.clearColor(1.0, 1.0, 1.0, 1.0);\n  gl.clearDepth(1.0);\n\n  gl.disable(gl.DEPTH_TEST);\n  gl.disable(gl.CULL_FACE);\n\n  gl.getExtension('OES_standard_derivatives');\n\n  const terrainShader =\n    createShaderProgram(gl, [ SHADER_VERT, SHADER_FRAG ], {\n      attribs: [ 'a_Position' ],\n      uniforms: [ 'u_Pointer', 'u_Offset', 'u_Height', 'u_Lines', 'u_AspectRatio' ],\n    });\n\n  const random = () => (Math.random() - 0.5) * OFFSET;\n\n  return {\n    ...Γ,\n    terrainShader,\n    vertexBuffer: gl.createBuffer(),\n    offset: [random(), random()],\n  };\n}\n\nfunction introduction() {\n  const handler = () => {\n    document.body.className += ' playing';\n    window.setTimeout(() => $$('#introduction').innerHTML = '', 1000);\n    document.removeEventListener('mousemove', handler);\n  };\n  document.addEventListener('mousemove', handler);\n}\n\nconst smoothstep = (min, max, t) => {\n  const x = Math.max(0, Math.min(1, (t - min) / (max - min)));\n  return x*x*(3 - 2*x);\n};\n\nconst sig = x => x < 0 ? -1 : 1;\n\nlet pointer = [0, 0], dpointer = [0, 0], target;\nlet zoom = LINES0, dzoom = 0;\n\nfunction onMouseMove({ canvas }, e) {\n  target = [e.clientX / canvas.clientWidth, 1 - e.clientY / canvas.clientHeight];\n}\n\nfunction onMouseWheel(Γ, e) {\n  e.preventDefault();\n  const delta = -e.wheelDelta || e.detail;\n  dzoom += Math.max(-1, Math.min(1, delta));\n}\n\nlet height = 0.0;\nfunction update(dt) {\n  if (!target)\n    return;\n\n  dpointer = [(target[0] - pointer[0]) * SPEED, (target[1] - pointer[1]) * SPEED];\n\n  pointer[0] += dpointer[0]*dt; pointer[1] += dpointer[1]*dt;\n  dpointer[0] *= DRAG; dpointer[1] *= DRAG;\n\n  zoom = Math.max(LINES_MIN, Math.min(LINES_MAX, zoom + dzoom*3*dt));\n  dzoom *= DRAG * 0.9;\n\n  if (height >= 1.0 - ε)\n    return;\n\n  height =\n    height < 1.0 - ε\n    ? Math.min(1.0, height + Math.abs(height - 1.0)*dt*3)\n    : 1.0\n}\n\nfunction render(gl, dt, { offset, terrainShader, vertexBuffer }) {\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n  gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n  // setup uniforms\n  gl.useProgram(terrainShader.program);\n  gl.uniform2f(terrainShader.uniforms.u_Pointer, ...pointer);\n  gl.uniform2f(terrainShader.uniforms.u_Offset, ...offset);\n  gl.uniform1f(terrainShader.uniforms.u_Height, height);\n  gl.uniform1f(terrainShader.uniforms.u_Lines, zoom);\n  gl.uniform1f(terrainShader.uniforms.u_AspectRatio, gl.canvas.width / gl.canvas.height);\n\n  { // draw square\n    const points = [ -1, -1, 1, -1, 1, 1, -1, 1 ];\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(points), gl.STATIC_DRAW);\n\n    gl.vertexAttribPointer(terrainShader.attribs.a_Position, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(terrainShader.attribs.a_Position);\n\n    gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);\n  }\n}\n"]}