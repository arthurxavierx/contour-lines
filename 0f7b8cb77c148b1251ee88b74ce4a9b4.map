{"version":3,"sources":["lib/modernizr.js","webgl.js","shader/vert.js","shader/noise4D.js","shader/frag.js","main.js"],"names":["e","n","t","o","s","a","i","r","l","f","hasOwnProperty","name","push","toLowerCase","options","aliases","length","fn","split","Modernizr","Boolean","d","join","u","className","_config","classPrefix","p","baseVal","enableJSClass","RegExp","replace","enableClasses","createElement","arguments","createElementNS","call","apply","body","fake","c","g","parseInt","id","appendChild","type","styleSheet","cssText","createTextNode","style","background","overflow","parentNode","removeChild","offsetHeight","_version","usePrefixes","_q","on","setTimeout","addTest","addAsyncTest","prototype","documentElement","nodeName","getContext","_prefixes","v","testStyles","DocumentTouch","offsetTop","webglextensions","webgl","getSupportedExtensions","h","window","document","createCanvas","createShaderProgram","loadShader","canvas","getElementById","context","gl","shaders","attribs","uniforms","program","createProgram","forEach","attachShader","shader","linkProgram","getProgramParameter","LINK_STATUS","Error","getProgramInfoLog","reduce","obj","getAttribLocation","getUniformLocation","vertexShader","VERTEX_SHADER","src","fragmentShader","FRAGMENT_SHADER","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","shaderLog","getShaderInfoLog","deleteShader","ε","SPEED","DRAG","OFFSET","LINES0","LINES_MIN","LINES_MAX","$","querySelectorAll","bind","$$","querySelector","addEventListener","main","OES_standard_derivatives","resizeCanvas","Γ","initGL","introduction","time0","loop","time","dt","update","render","requestAnimationFrame","onMouseWheel","onMouseMove","width","clientWidth","height","clientHeight","viewport","clearColor","clearDepth","disable","DEPTH_TEST","CULL_FACE","getExtension","terrainShader","random","Math","vertexBuffer","createBuffer","offset","handler","innerHTML","removeEventListener","smoothstep","min","max","x","sig","pointer","dpointer","target","zoom","dzoom","touches","clientX","clientY","preventDefault","delta","wheelDelta","detail","abs","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","drawingBufferWidth","drawingBufferHeight","useProgram","uniform2f","u_Pointer","u_Offset","uniform1f","u_Height","u_Lines","u_AspectRatio","points","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","vertexAttribPointer","a_Position","FLOAT","enableVertexAttribArray","drawArrays","TRIANGLE_FAN"],"mappings":"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","file":"0f7b8cb77c148b1251ee88b74ce4a9b4.map","sourcesContent":["/*! modernizr 3.5.0 (Custom Build) | MIT *\n * https://modernizr.com/download/?-canvas-touchevents-webgl-webglextensions-setclasses !*/\n!function(e,n,t){function o(e,n){return typeof e===n}function s(){var e,n,t,s,a,i,r;for(var l in f)if(f.hasOwnProperty(l)){if(e=[],n=f[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(s=o(n.fn,\"function\")?n.fn():n.fn,a=0;a<e.length;a++)i=e[a],r=i.split(\".\"),1===r.length?Modernizr[r[0]]=s:(!Modernizr[r[0]]||Modernizr[r[0]]instanceof Boolean||(Modernizr[r[0]]=new Boolean(Modernizr[r[0]])),Modernizr[r[0]][r[1]]=s),d.push((s?\"\":\"no-\")+r.join(\"-\"))}}function a(e){var n=u.className,t=Modernizr._config.classPrefix||\"\";if(p&&(n=n.baseVal),Modernizr._config.enableJSClass){var o=new RegExp(\"(^|\\\\s)\"+t+\"no-js(\\\\s|$)\");n=n.replace(o,\"$1\"+t+\"js$2\")}Modernizr._config.enableClasses&&(n+=\" \"+t+e.join(\" \"+t),p?u.className.baseVal=n:u.className=n)}function i(){return\"function\"!=typeof n.createElement?n.createElement(arguments[0]):p?n.createElementNS.call(n,\"http://www.w3.org/2000/svg\",arguments[0]):n.createElement.apply(n,arguments)}function r(){var e=n.body;return e||(e=i(p?\"svg\":\"body\"),e.fake=!0),e}function l(e,t,o,s){var a,l,f,c,d=\"modernizr\",p=i(\"div\"),g=r();if(parseInt(o,10))for(;o--;)f=i(\"div\"),f.id=s?s[o]:d+(o+1),p.appendChild(f);return a=i(\"style\"),a.type=\"text/css\",a.id=\"s\"+d,(g.fake?g:p).appendChild(a),g.appendChild(p),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(n.createTextNode(e)),p.id=d,g.fake&&(g.style.background=\"\",g.style.overflow=\"hidden\",c=u.style.overflow,u.style.overflow=\"hidden\",u.appendChild(g)),l=t(p,e),g.fake?(g.parentNode.removeChild(g),u.style.overflow=c,u.offsetHeight):p.parentNode.removeChild(p),!!l}var f=[],c={_version:\"3.5.0\",_config:{classPrefix:\"\",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){f.push({name:e,fn:n,options:t})},addAsyncTest:function(e){f.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=c,Modernizr=new Modernizr;var d=[],u=n.documentElement,p=\"svg\"===u.nodeName.toLowerCase();Modernizr.addTest(\"canvas\",function(){var e=i(\"canvas\");return!(!e.getContext||!e.getContext(\"2d\"))});var g=c._config.usePrefixes?\" -webkit- -moz- -o- -ms- \".split(\" \"):[\"\",\"\"];c._prefixes=g;var v=c.testStyles=l;Modernizr.addTest(\"touchevents\",function(){var t;if(\"ontouchstart\"in e||e.DocumentTouch&&n instanceof DocumentTouch)t=!0;else{var o=[\"@media (\",g.join(\"touch-enabled),(\"),\"heartz\",\")\",\"{#modernizr{top:9px;position:absolute}}\"].join(\"\");v(o,function(e){t=9===e.offsetTop})}return t}),Modernizr.addTest(\"webgl\",function(){var n=i(\"canvas\"),t=\"probablySupportsContext\"in n?\"probablySupportsContext\":\"supportsContext\";return t in n?n[t](\"webgl\")||n[t](\"experimental-webgl\"):\"WebGLRenderingContext\"in e}),Modernizr.addAsyncTest(function(){if(Modernizr.webglextensions=!1,Modernizr.webgl){var e,n,o;try{e=i(\"canvas\"),n=e.getContext(\"webgl\")||e.getContext(\"experimental-webgl\"),o=n.getSupportedExtensions()}catch(s){return}n!==t&&(Modernizr.webglextensions=new Boolean(!0));for(var a=-1,r=o.length;++a<r;)Modernizr.webglextensions[o[a]]=!0;e=t}}),s(),a(d),delete c.addTest,delete c.addAsyncTest;for(var h=0;h<Modernizr._q.length;h++)Modernizr._q[h]();e.Modernizr=Modernizr}(window,document);","export function createCanvas(id) {\n  const canvas = document.getElementById(id);\n  const context = canvas.getContext('webgl');\n  return { canvas, context };\n}\n\nexport function createShaderProgram(gl, shaders, { attribs, uniforms }) {\n  const program = gl.createProgram();\n  shaders.forEach(shader => gl.attachShader(program, shader(gl)));\n  gl.linkProgram(program);\n\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    throw new Error('Unable to initialize the shader program: ' + gl.getProgramInfoLog(program));\n  }\n\n  return {\n    program,\n    attribs: attribs.reduce((obj, a) => (obj[a] = gl.getAttribLocation(program, a), obj), {}),\n    uniforms: uniforms.reduce((obj, u) => (obj[u] = gl.getUniformLocation(program, u), obj), {}),\n  };\n}\n\nexport const vertexShader = src => gl => loadShader(gl, gl.VERTEX_SHADER, src);\nexport const fragmentShader = src => gl => loadShader(gl, gl.FRAGMENT_SHADER, src);\n\nexport function loadShader(gl, type, src) {\n  const shader = gl.createShader(type);\n  gl.shaderSource(shader, src);\n  gl.compileShader(shader);\n\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    const shaderLog = gl.getShaderInfoLog(shader);\n    gl.deleteShader(shader);\n    throw new Error('An error occurred compiling the shaders: ' + shaderLog);\n  }\n\n  return shader;\n}\n","// vim: filetype=glsl\nimport { vertexShader } from '../webgl';\nexport default vertexShader`\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nattribute vec2 a_Position;\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = (a_Position + 1.0) * 0.5;\n  gl_Position = vec4(a_Position, 0.0, 1.0);\n}\n\n\n`;\n","// vim: filetype=glsl\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n//\n\nexport default `\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r) {\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r) {\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip) {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n}\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v) {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n      0.276393202250021,  // 2 * G4\n      0.414589803375032,  // 3 * G4\n      -0.447213595499958); // -1 + 4 * G4\n\n  // First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n  // Other corners\n\n  // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n  //  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n  //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n  // Permutations\n  i = mod289(i);\n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n            i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n          + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n        + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n      + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n  // Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n  // 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n  // Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n  // Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n      + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n\n`;\n","// vim: filetype=glsl\nimport { fragmentShader } from '../webgl';\nimport noise4D from './noise4D.js';\n\nexport default fragmentShader(`\n\n#extension GL_OES_standard_derivatives : enable\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec2 u_Pointer;\nuniform vec2 u_Offset;\nuniform float u_Height;\nuniform float u_Lines;\nuniform float u_AspectRatio;\n\nvarying vec2 v_UV;\n\n${noise4D}\n\nvoid main() {\n  vec2 uv = v_UV * vec2(u_AspectRatio, 1.0);\n  vec4 position = vec4(uv + u_Offset, u_Pointer.xy / 5.0);\n\n  float noise =\n    snoise(position)\n    + 0.5 * snoise(position * vec4(2.0, 2.0, 1.4, 1.4))\n    + 0.25 * snoise(position * vec4(4.0, 4.0, 2.0, 2.0));\n  noise *= u_Height;\n\n  float f = abs(fract(noise * u_Lines * u_Height) - 0.5);\n  float df = fwidth(noise * u_Lines * u_Height);\n\n  const float m = 0.1;\n  float z = clamp((f - df*m) / df + m, m, 1.0);\n\n  gl_FragColor = vec4(z, z, z, 1);\n}\n\n`);\n","import './lib/modernizr';\n\nimport { createCanvas, createShaderProgram } from './webgl';\n\nimport SHADER_VERT from './shader/vert';\nimport SHADER_FRAG from './shader/frag';\n\n//\nconst ε = 0.00001, SPEED = 0.15, DRAG = 0.98, OFFSET = 1000.0;\n\nconst LINES0 = 5, LINES_MIN = 1, LINES_MAX = 12;\n\n//\nconst $ = document.querySelectorAll.bind(document);\nconst $$ = document.querySelector.bind(document);\n\nwindow.addEventListener('load', main, false);\n\nfunction main() {\n  if (!Modernizr.canvas ||\n      !Modernizr.webgl ||\n      !Modernizr.webglextensions ||\n      !Modernizr.webglextensions.OES_standard_derivatives)\n    document.body.className += ' incompatible';\n\n  const { canvas, context: gl } = createCanvas('canvas');\n  resizeCanvas(gl);\n\n  // initialize WebGL environment\n  const Γ = initGL(gl, { canvas });\n\n  introduction(Γ);\n\n  //\n  let time0 = 0;\n  function loop(time) {\n    resizeCanvas(gl);\n\n    const dt = (time - time0) * 0.001;\n\n    if (time0 > 0)\n      update(dt, Γ);\n    render(gl, dt, Γ);\n\n    time0 = time;\n    window.requestAnimationFrame(loop);\n  }\n  window.requestAnimationFrame(loop);\n\n  document.body.addEventListener('mousewheel', onMouseWheel.bind(null, Γ), false);\n  document.body.addEventListener('mousemove', onMouseMove.bind(null, Γ), false);\n  document.body.addEventListener('touchmove', onMouseMove.bind(null, Γ), false);\n}\n\nfunction resizeCanvas(gl) {\n  if (gl.canvas.width != gl.canvas.clientWidth || gl.canvas.height != gl.canvas.clientHeight) {\n    gl.canvas.width = gl.canvas.clientWidth;\n    gl.canvas.height = gl.canvas.clientHeight;\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n  }\n}\n\n\nfunction initGL(gl, Γ) {\n  gl.clearColor(1.0, 1.0, 1.0, 1.0);\n  gl.clearDepth(1.0);\n\n  gl.disable(gl.DEPTH_TEST);\n  gl.disable(gl.CULL_FACE);\n\n  gl.getExtension('OES_standard_derivatives');\n\n  const terrainShader =\n    createShaderProgram(gl, [ SHADER_VERT, SHADER_FRAG ], {\n      attribs: [ 'a_Position' ],\n      uniforms: [ 'u_Pointer', 'u_Offset', 'u_Height', 'u_Lines', 'u_AspectRatio' ],\n    });\n\n  const random = () => (Math.random() - 0.5) * OFFSET;\n\n  return {\n    ...Γ,\n    terrainShader,\n    vertexBuffer: gl.createBuffer(),\n    offset: [random(), random()],\n  };\n}\n\nfunction introduction() {\n  const handler = () => {\n    document.body.className += ' playing';\n    window.setTimeout(() => $$('#introduction').innerHTML = '', 1000);\n    document.removeEventListener('mousemove', handler);\n    document.removeEventListener('touchmove', handler);\n  };\n  document.addEventListener('mousemove', handler);\n  document.addEventListener('touchmove', handler);\n}\n\nconst smoothstep = (min, max, t) => {\n  const x = Math.max(0, Math.min(1, (t - min) / (max - min)));\n  return x*x*(3 - 2*x);\n};\n\nconst sig = x => x < 0 ? -1 : 1;\n\nlet pointer = [0, 0], dpointer = [0, 0], target;\nlet zoom = LINES0, dzoom = 0;\n\nfunction onMouseMove({ canvas }, e) {\n  target =\n    e.touches\n    ? [e.touches[0].clientX / canvas.clientWidth, 1 - e.touches[0].clientY / canvas.clientHeight]\n    : [e.clientX / canvas.clientWidth, 1 - e.clientY / canvas.clientHeight];\n}\n\nfunction onMouseWheel(Γ, e) {\n  e.preventDefault();\n  const delta = -e.wheelDelta || e.detail;\n  dzoom += Math.max(-1, Math.min(1, delta));\n}\n\nlet height = 0.0;\nfunction update(dt) {\n  if (!target)\n    return;\n\n  dpointer = [(target[0] - pointer[0]) * SPEED, (target[1] - pointer[1]) * SPEED];\n\n  pointer[0] += dpointer[0]; pointer[1] += dpointer[1];\n  dpointer[0] *= DRAG; dpointer[1] *= DRAG;\n\n  zoom = Math.max(LINES_MIN, Math.min(LINES_MAX, zoom + dzoom*3*dt));\n  dzoom *= DRAG * 0.9;\n\n  if (height >= 1.0 - ε)\n    return;\n\n  height =\n    height < 1.0 - ε\n    ? Math.min(1.0, height + Math.abs(height - 1.0)*dt*3)\n    : 1.0\n}\n\nfunction render(gl, dt, { offset, terrainShader, vertexBuffer }) {\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n  gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n  // setup uniforms\n  gl.useProgram(terrainShader.program);\n  gl.uniform2f(terrainShader.uniforms.u_Pointer, ...pointer);\n  gl.uniform2f(terrainShader.uniforms.u_Offset, ...offset);\n  gl.uniform1f(terrainShader.uniforms.u_Height, height);\n  gl.uniform1f(terrainShader.uniforms.u_Lines, zoom);\n  gl.uniform1f(terrainShader.uniforms.u_AspectRatio, gl.canvas.width / gl.canvas.height);\n\n  { // draw square\n    const points = [ -1, -1, 1, -1, 1, 1, -1, 1 ];\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(points), gl.STATIC_DRAW);\n\n    gl.vertexAttribPointer(terrainShader.attribs.a_Position, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(terrainShader.attribs.a_Position);\n\n    gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);\n  }\n}\n"]}